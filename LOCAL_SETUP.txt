LOCAL DEVELOPMENT SETUP
========================

ÖNEMLI: Local'de PHP 8.1 var, Laravel 12 PHP 8.2+ gerektirir.
Coolify'da PHP 8.2 kullanılacak, local test için şu seçenekler var:

SEÇENEK 1: DIREKT COOLIFY'A DEPLOY (ÖNERİLEN)
==============================================
1. Git repository oluştur ve push et
2. Coolify'da yeni uygulama oluştur
3. Environment variables'ı ayarla (ENV_EXAMPLE.txt'den)
4. Deploy et
5. Post-deploy komutları çalıştır:
   - cd backend
   - php artisan key:generate
   - Coolify PostgreSQL'e init.sql'i import et

SEÇENEK 2: PHP 8.2+ YÜKLEYİN
=============================
https://windows.php.net/download/
PHP 8.2 veya 8.3 indirip yükleyin.

SEÇENEK 3: DOCKER ILE LOCAL TEST
=================================
Docker kullanarak PHP 8.2 ile test:

1. docker-compose.yml oluştur (root dizinde)
2. docker-compose up
3. http://localhost:3000 ile erişim

POSTGRESQL INIT.SQL IMPORT
===========================
Coolify PostgreSQL'e bağlanıp init.sql'i çalıştırın:

Method 1: psql ile
------------------
psql "postgres://postgres:PASSWORD@HOST:5432/postgres" < backend/database/init.sql

Method 2: Coolify adminer/pgAdmin
----------------------------------
1. Coolify'da PostgreSQL servisine adminer ekleyin
2. Adminer'da "Import" sekmesi
3. backend/database/init.sql dosyasını seçin
4. "Execute" tıklayın

Method 3: Copy-Paste
--------------------
1. backend/database/init.sql dosyasını açın
2. Tüm içeriği kopyalayın
3. Coolify PostgreSQL Query Editor'e yapıştırın
4. Çalıştırın

DEPLOYMENT ADIMLARI
===================

1. GIT PUSH
   git add .
   git commit -m "Initial commit"
   git push

2. COOLIFY SETUP
   - New Application
   - Connect Git Repo
   - Set Environment Variables (ENV_EXAMPLE.txt)
   - Deploy

3. POSTGRESQL IMPORT
   - backend/database/init.sql içeriğini kopyala
   - Coolify PostgreSQL'e paste et ve çalıştır

4. POST-DEPLOY COMMANDS
   cd backend
   php artisan key:generate
   php artisan storage:link
   php artisan config:cache
   php artisan route:cache

5. TEST
   https://test-sms-link.com.tr
   Login: admin@sigorta.com / password

DEMO USERS (init.sql'de dahil)
===============================
admin@sigorta.com       / password (Super Admin)
istanbul@sigorta.com    / password (Yönetici)
ankara@sigorta.com      / password (Acente)
muhasebe@sigorta.com    / password (Muhasebe)
izmir@sigorta.com       / password (Görüntüleyici)
bursa@sigorta.com       / password (Müdür)

ENVIRONMENT VARIABLES (Coolify)
================================
Bakınız: backend/ENV_EXAMPLE.txt

Önemli olanlar:
- APP_KEY (php artisan key:generate ile)
- DB_* (PostgreSQL credentials)
- APP_URL=https://test-sms-link.com.tr
- NEXT_PUBLIC_API_URL=https://test-sms-link.com.tr/api/v1

DOSYA YAPISI
============
/backend/database/init.sql  -> PostgreSQL schema + demo data
/backend/ENV_EXAMPLE.txt    -> Backend environment variables
/ENV_LOCAL_EXAMPLE.txt      -> Frontend environment variables
/start.sh                   -> Startup script (Backend + Frontend)
/nixpacks.toml              -> Coolify build config

BAŞARIYLA DEPLOY EDİLDİKTEN SONRA
==================================
1. Domain'e git: https://test-sms-link.com.tr
2. Login ol: admin@sigorta.com / password
3. Dashboard görmen lazım
4. API test: https://test-sms-link.com.tr/api/v1/file-types

SORUN GİDERME
=============
1. CORS hatası -> SANCTUM_STATEFUL_DOMAINS kontrol et
2. Database hatası -> init.sql çalıştırıldı mı?
3. 500 hatası -> php artisan key:generate yapıldı mı?
4. Login çalışmıyor -> backend/storage/logs/laravel.log kontrol et

