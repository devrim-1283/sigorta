GIT & COOLIFY DEPLOYMENT
========================

1. GIT REPOSITORY OLUÅTUR
--------------------------
# GitHub/GitLab/Gitea'da yeni repo oluÅŸtur
# Ã–rnek: https://github.com/username/sigorta-yonetim

2. LOCAL GIT INIT (PowerShell)
-------------------------------
cd C:\Users\tunce\OneDrive\Desktop\proje

git init
git add .
git commit -m "Initial commit: Sigorta YÃ¶netim Sistemi"
git branch -M main
git remote add origin YOUR_GIT_URL
git push -u origin main

3. COOLIFY SETUP
----------------
a) Coolify Dashboard'a git
b) "New Resource" -> "Application"
c) "Connect Git Repository" seÃ§
d) Repository URL'i yapÄ±ÅŸtÄ±r
e) Branch: main
f) Build Pack: Nixpacks (otomatik seÃ§ilecek)

4. ENVIRONMENT VARIABLES AYARLA
--------------------------------
Coolify'da "Environment" sekmesine git ve ÅŸunlarÄ± ekle:

# Backend
APP_NAME="Sigorta YÃ¶netim Sistemi"
APP_ENV=production
APP_KEY=                    # BoÅŸ bÄ±rak, post-deploy generate edeceÄŸiz
APP_DEBUG=false
APP_URL=https://test-sms-link.com.tr
FRONTEND_URL=https://test-sms-link.com.tr

# Database (Coolify PostgreSQL)
DB_CONNECTION=pgsql
DB_HOST=f04k88w8koc44c4wossw04w4
DB_PORT=5432
DB_DATABASE=postgres
DB_USERNAME=postgres
DB_PASSWORD=s5CtgtRRl1z10S6feIbjixpjwnBTjh2LtBNY57sf883PIcvWa912Mz3ZC7Ed4v0F

# CORS & Security
SANCTUM_STATEFUL_DOMAINS=test-sms-link.com.tr,www.test-sms-link.com.tr
CORS_ALLOWED_ORIGINS=https://test-sms-link.com.tr,https://www.test-sms-link.com.tr

# Cache & Sessions
CACHE_STORE=database
SESSION_DRIVER=database
QUEUE_CONNECTION=database

# Frontend
NEXT_PUBLIC_API_URL=https://test-sms-link.com.tr/api/v1

5. DOMAIN AYARLA
----------------
Coolify'da "Domains" sekmesi:
- test-sms-link.com.tr ekle
- SSL/HTTPS otomatik aktif olacak

6. DEPLOY ET
------------
"Deploy" butonuna tÄ±kla
Build sÃ¼reci baÅŸlayacak (2-5 dakika)

7. POSTGRESQL SETUP (Ã–NEMLÄ°!)
------------------------------
Deploy bittikten sonra:

a) Coolify'da PostgreSQL servisini aÃ§
b) "Execute Command" veya adminer kullan
c) backend/database/init.sql dosyasÄ±nÄ± aÃ§
d) TÃœM iÃ§eriÄŸi kopyala
e) PostgreSQL query editor'e yapÄ±ÅŸtÄ±r
f) Execute/Run et

8. POST-DEPLOY COMMANDS
------------------------
Coolify Terminal'de:

cd backend
php artisan key:generate
php artisan storage:link
php artisan config:cache
php artisan route:cache

9. TEST ET
----------
https://test-sms-link.com.tr
Login: admin@sigorta.com
Password: password

10. API TEST
------------
https://test-sms-link.com.tr/api/v1/file-types
(4 dosya tipi JSON dÃ¶nmeli)

BAÅARILI DEPLOYMENT KRÄ°TERLERÄ°
===============================
âœ… Site aÃ§Ä±lÄ±yor (https://test-sms-link.com.tr)
âœ… Login sayfasÄ± gÃ¶rÃ¼nÃ¼yor
âœ… Admin login Ã§alÄ±ÅŸÄ±yor
âœ… Dashboard yÃ¼kleniyor
âœ… API endpoint'ler Ã§alÄ±ÅŸÄ±yor
âœ… CORS hatasÄ± yok

SORUN GÄ°DERME
=============
Hata: "Failed to connect to database"
-> init.sql Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ± kontrol et

Hata: "CORS policy error"
-> Environment variables'da SANCTUM_STATEFUL_DOMAINS doÄŸru mu?

Hata: "No application encryption key"
-> php artisan key:generate Ã§alÄ±ÅŸtÄ±r

Hata: "500 Internal Server Error"
-> Coolify logs kontrol et
-> php artisan config:clear
-> APP_KEY var mÄ± kontrol et

BUILD SÃœRESI
============
Ortalama: 3-5 dakika
- npm install: ~2 dk
- composer install: ~1 dk
- next build: ~1 dk
- Laravel cache: ~30 sn

GÃœNCELLEME (Code Push)
======================
1. Local'de deÄŸiÅŸiklik yap
2. git add .
3. git commit -m "Update message"
4. git push
5. Coolify otomatik detect edip deploy eder

READY TO DEPLOY! ğŸš€
===================
TÃ¼m dosyalar hazÄ±r:
âœ… backend/database/init.sql (PostgreSQL schema + data)
âœ… nixpacks.toml (Build config)
âœ… start.sh (Startup script)
âœ… .gitignore (Git config)
âœ… Environment examples

Coolify'a yÃ¼klemek iÃ§in git push yapÄ±n!

